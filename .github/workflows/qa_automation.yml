# .github/workflows/qa_automation.yml

name: DataDash Automated QA with Playwright

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  playwright_qa_test:
    name: Run Playwright Scraper
    runs-on: ubuntu-latest

    steps:
      # Required step with email identifier
      - name: ðŸ“§ Set up Environment and Email Identifier 24f2009283@ds.study.iitm.ac.in
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      # Step 3: Create package.json
      - name: Create package.json
        run: echo '{"name": "datadash-qa", "version": "1.0.0"}' > package.json

      # Install Playwright npm Package
      - name: Install Playwright npm Package
        run: npm install playwright

      # Install Playwright browser dependencies (Chromium)
      - name: Install Playwright Browser Dependencies
        run: npx playwright install --with-deps chromium

      # Run the main scraper script
      - name: Execute Playwright Scraper
        run: node scraper.js
