# .github/workflows/qa_automation.yml

name: DataDash Automated QA with Playwright

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  playwright_qa_test:
    name: Run Playwright Scraper
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“§ Set up Environment and Email Identifier 24f2009283@ds.study.iitm.ac.in
      uses: actions/checkout@v4
      
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'

    # 1. Create a dummy package.json to avoid 'npm install' warnings
    - name: Create package.json
      run: echo '{"name": "datadash-qa", "version": "1.0.0"}' > package.json

    # 2. Install Playwright dependency
    - name: Install Playwright npm Package
      run: npm install playwright
      
    # 3. Install Playwright browser dependencies (Chromium)
    - name: Install Playwright Browser Dependencies (Fix for Line 30 Error)
      run: npx playwright install --with-deps chromium

    # 4. Run the main scraper script
    - name: Execute Playwright Scraper
      run: node scraper.js
